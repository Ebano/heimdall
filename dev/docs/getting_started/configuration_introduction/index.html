<!doctype html><html lang=en><head><title>Configuration Introduction</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Heimdall is an open source identity aware proxy (IAP) and access control decision service, designed for cloud native applications"><meta name=dc.relation content="https://dadrus.github.io/"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=../../../css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=../../../favicon.ico></head><body><header class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand text-white" href=../../../ style=font-weight:500;font-size:1.5rem>Heimdall</a>
<button class=navbar-toggler type=button data-bs-toggle=offcanvas data-bs-target=#mainMenuContent aria-controls=mainMenuContent aria-expanded=false aria-label="Open main menu">
<span class=navbar-toggler-icon></span></button><div class="offcanvas offcanvas-end bg-dark" tabindex=-1 id=mainMenuContent data-bs-scroll=true aria-labelledby=mainMenuContentLabel><div class=offcanvas-header><h5 class="offcanvas-title text-white" id=mainMenuContentLabel>Heimdall</h5><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class=offcanvas-body><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item style=display:flex><a class='nav-link text-white' href=../../../docs/welcome style=align-self:center>Docs</a></li><li class=nav-item style=display:flex><a class='nav-link text-white' href=../../../openapi/ style=align-self:center>API</a></li><li class="nav-item dropdown" style=display:flex><a class='nav-link dropdown-toggle text-white' href=# id="Get Started-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false style=align-self:center>Get Started</a><ul class="dropdown-menu bg-dark" aria-labelledby="Get Started-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../docs/getting_started/concepts/>Concepts</a></li><li><a class='dropdown-item text-white' href=../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li><a class='dropdown-item text-white' href=../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li></ul></li><li class="nav-item dropdown" style=display:flex><a class='nav-link dropdown-toggle text-white' href=# id="Integration Guides-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false style=align-self:center>Integration Guides</a><ul class="dropdown-menu bg-dark" aria-labelledby="Integration Guides-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/nginx/>NGINX Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/envoy/>Envoy Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/opa/>Integration with OPA</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/contour/>Contour Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/haproxy/>HAProxy Integration</a></li></ul></li></ul><hr class="text-white-50 d-md-none"><ul class="navbar-nav flex-column ms-auto" style=align-self:center><doc-version-select class="nav-item dropdown" version-file=/heimdall/data.json current-version=dev current-page=/docs/getting_started/configuration_introduction/><button class="btn btn-dark dropdown-toggle me-4" data-bs-toggle=dropdown aria-expanded=false>
dev</button></doc-version-select></ul><ul class="navbar-nav flex-column"><li class="nav-item mb-1" style=display:flex><a class="nav-link text-white" style=align-self:center href=https://github.com/dadrus/heimdall><svg xmlns="http://www.w3.org/2000/svg" role="img" width="20" height="20" fill="currentcolor" class="bi bi-github text-white" viewBox="0 0 16 16"><title>GitHub</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></nav></header><nav class="navbar navbar-expand-lg bg-light" aria-label="Docs menu"><div class=container-xxl><div class="row container-fluid"><doc-search class="col-auto me-auto" index-file=/heimdall/dev/index.json path-prefix=/heimdall/dev><form id=docs-search tabindex=1 class="doks-search position-relative me-auto"><input id=search class="form-control search-bar" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=search-suggestions class="shadow bg-white rounded collapse search-results"></div></form></doc-search><button class="col-auto navbar-toggler" type=button data-bs-toggle=collapse data-bs-target=#docsMenuContent aria-controls=docsMenuContent aria-expanded=false aria-label="Open docs menu"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-arrow-down-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.5 15a.5.5.0 00.5-.5V2.707l3.146 3.147a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 10.708.708L11 2.707V14.5a.5.5.0 00.5.5zm-7-14a.5.5.0 01.5.5v11.793l3.146-3.147a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 01.708-.708L4 13.293V1.5a.5.5.0 01.5-.5z"/></svg></button></div><div class="row d-md-none"><div class="col-2 collapse navbar-collapse" id=docsMenuContent><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=true>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li><li class=nav-item><a class="nav-link fw-bold" href=../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-63bf47d7b1e91548862e3da277e46e20a4b75401 aria-expanded=false>
Integration Guides</button><div id=section-63bf47d7b1e91548862e3da277e46e20a4b75401 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/nginx/>NGINX Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/envoy/>Envoy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/opa/>Integration with OPA</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/contour/>Contour Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/haproxy/>HAProxy Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=false>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class=collapse><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/decision/>Decision</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/management/>Management</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/tracing/>Tracing</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/profiling/>Runtime Profiling</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 aria-expanded=false>
Pipeline Mechanisms</button><div id=section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/overview/>Mechanisms Overview</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/contextualizers/>Contextualizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/unifiers/>Unifiers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/configuration/>Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/default/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/cryptographic_material/>Cryptographic Material</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/types/>Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></div></div></div></nav><div class="container-xxl d-xxl-flex"><aside class="d-none d-md-block pe-4 pt-4 flex-xxl-shrink-0"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=true>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li><li class=nav-item><a class="nav-link fw-bold" href=../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-63bf47d7b1e91548862e3da277e46e20a4b75401 aria-expanded=false>
Integration Guides</button><div id=section-63bf47d7b1e91548862e3da277e46e20a4b75401 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/nginx/>NGINX Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/envoy/>Envoy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/opa/>Integration with OPA</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/contour/>Contour Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/haproxy/>HAProxy Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=false>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class=collapse><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/decision/>Decision</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/management/>Management</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/tracing/>Tracing</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/profiling/>Runtime Profiling</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 aria-expanded=false>
Pipeline Mechanisms</button><div id=section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/overview/>Mechanisms Overview</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/contextualizers/>Contextualizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/unifiers/>Unifiers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/configuration/>Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/default/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/cryptographic_material/>Cryptographic Material</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/types/>Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></aside><main class="px-3 pt-4 flex-xxl-grow-0"><h1>Configuration Introduction</h1><div><linkable-headline-area><div class=paragraph><p>Configuration in heimdall can refer to two different things:</p></div><div class=ulist><ul><li><p>the static startup configuration and</p></li><li><p>the configuration of rules, respectively rule sets</p></li></ul></div><div class=paragraph><p>Elements in the static configuration set up the services, like <a href=../../../docs/configuration/services/decision/>decision service</a>, which basically define the entry points, heimdall will listen to, the observability capabilities, like <a href=../../../docs/configuration/observability/logging/>logging</a>, the supported <a href=../../../docs/configuration/rules/pipeline_mechanisms/overview/>pipeline mechanisms</a>, the <a href=../../../docs/configuration/rules/default/>default rule</a>, as well as the <a href=../../../docs/configuration/rules/providers/>rule providers</a> (these elements are not expected to change often).</p></div><div class=paragraph><p>The rule set contains everything that defines how the requests are handled by heimdall for your system.
This configuration can change and is seamlessly hot-reloaded, without any request interruption or connection loss.</p></div><div class=sect1><h2 id=_static_startup_configuration>Static Startup Configuration</h2><div class=sectionbody><div class=paragraph><p>There are two different, not mutually exclusive (you can combine them), ways to define static configuration options in Heimdall:</p></div><div class="olist arabic"><ol class=arabic><li><p>in a <a href=#_configuration_file>configuration file</a> (only <a href=https://yaml.org/spec/1.2.2/>YAML</a> is supported as format)</p></li><li><p>as <a href=#_environment_variables>environment variables</a></p></li></ol></div><div class=paragraph><p>The evaluation happens also in the order stated above.
That also means, you can always overwrite configuration options defined in a configuration file with corresponding environment variables.</p></div><div class=paragraph><p>If no configuration is provided, heimdall will set useful defaults.
These are however not enough, as heimdall doesn’t know your context - which mechanisms are required for the one or the other of your upstream services.
So, you’ll not really be able to use heimdall as all requests will be answered with an HTTP <code>405 Method Not Allowed</code> response code.</p></div><div class=sect2><h3 id=_configuration_file>Configuration File</h3><div class=paragraph><p>At start up, heimdall searches for static configuration in a file named <code>heimdall.yaml</code> in</p></div><div class=ulist><ul><li><p><code>/etc/heimdall</code></p></li><li><p><code>$HOME/.config</code></p></li><li><p>the current working directory</p></li></ul></div><div class=paragraph><p>You can also override this using the <code>config</code> argument: <code>heimdall --config &lt;path-to-your-config-file></code>.</p></div><div class=paragraph><p>The values in the configuration file can also make use of environment variables. Access to these happens using Bash syntax. Following expressions are supported:</p></div><div class=ulist><ul><li><p><code>${var}</code> - Value of <code>$var</code></p></li><li><p><code>${var=default}</code> - If <code>$var</code> is not set, evaluate expression as <code>default</code></p></li><li><p><code>${var:=default}</code> - If <code>$var</code> is not set or is empty, evaluate expression as <code>default</code></p></li></ul></div><div class=exampleblock><div class=title>Example 1. Possible minimal fully working configuration</div><div class=content><div class=paragraph><p>The configuration below defines a <a href=../../../docs/configuration/rules/default/>default rule</a> which lets heimdall create a JSON Web Token (JWT) with <code>sub</code> claim set to <code>anonymous</code> for every request on every URL for the HTTP methods GET and POST.
The JWT itself will be put into the <code>Authorization</code> header as a bearer token.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>log</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>level</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>info</span>

<span style=color:#a6e22e>rules</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>mechanisms</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>authenticators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anonymous_authenticator</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anonymous</span>
    <span style=color:#a6e22e>unifiers</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>create_jwt</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>jwt</span>

  <span style=color:#a6e22e>default</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>methods</span><span style=color:#fff;background-color:#272822>:</span>
      <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>GET</span>
      <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>POST</span>
    <span style=color:#a6e22e>execute</span><span style=color:#fff;background-color:#272822>:</span>
      <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>authenticator</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anonymous_authenticator</span>
      <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>unifier</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>create_jwt</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 2. Configuration with a mechanism defined using environment variables substitution</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>rules</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>mechanisms</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>authenticators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>hydra_authenticator</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>oauth2_introspection</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>introspection_endpoint</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://hydra:4445/oauth2/introspect</span>
          <span style=color:#a6e22e>auth</span><span style=color:#fff;background-color:#272822>:</span>
            <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>basic_auth</span>
            <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
              <span style=color:#a6e22e>user</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>${INTROSPECT_EP_USER}</span>
              <span style=color:#a6e22e>password</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>${INTROSPECT_EP_PASSWORD}</span>
    <span style=color:#a6e22e>unifiers</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>create_jwt</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>jwt</span></code></pre></div></div></div></div></div><div class=sect2><h3 id=_environment_variables>Environment Variables</h3><div class=paragraph><p>Every configuration property, which can be defined in a <a href=#_configuration_file>configuration file</a> can also be defined as environment variable.
Following rules apply:</p></div><div class=ulist><ul><li><p>If not specified while starting heimdall, all variables start with <code>HEIMDALLCFG_</code> prefix.</p><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content>If for whatever reason, your environment configuration contains variables starting with <code>HEIMDALLCFG_</code>, which do not define heimdall specific configuration, heimdall will refuse starting if such configuration variable clashes (has an unexpected type) with heimdall’s configuration properties (even for environment variables, the configuration is type safe).
You can overcome such situation, by ether renaming such variables, or, if this is not possible, make use of the <code>--env-config-prefix</code> flag with heimdall’s <code>serve</code> command.</td></tr></tbody></table></div></li><li><p>Properties in a hierarchy are separated by <code>_</code></p><div class=paragraph><p>E.g. the log level can be set to <code>info</code> in a config file as also shown in the above example with</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>log</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>level</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>info</span></code></pre></div></div><div class=paragraph><p>and using an environment variable with</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash><span style=color:#fff;background-color:#272822>HEIMDALLCFG_LOG_LEVEL</span><span style=color:#f92672>=</span>info</code></pre></div></div></li><li><p>Array entries must be defined using <code>_&lt;IDX>[_]</code>, with <code>IDX</code> being the index of the array starting with <code>0</code> and <code>_</code> in brackets being only required, if the value of the configured element has a structure/hierarchy.</p><div class=paragraph><p>E.g. the <code>methods</code> of the <a href=../../../docs/configuration/rules/default/>default rule</a> can be configured in a config file as</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>rules</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>default</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>methods</span><span style=color:#fff;background-color:#272822>:</span>
      <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>GET</span>
      <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>POST</span></code></pre></div></div><div class=paragraph><p>and using environment variables with</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash><span style=color:#fff;background-color:#272822>HEIMDALLCFG_RULES_DEFAULT_METHODS_0</span><span style=color:#f92672>=</span>GET
<span style=color:#fff;background-color:#272822>HEIMDALLCFG_RULES_DEFAULT_METHODS_1</span><span style=color:#f92672>=</span>POST</code></pre></div></div><div class=paragraph><p>For structured configuration, like the definition of the authenticators in the example above</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>rules</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>mechanisms</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>authenticators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anonymous_authenticator</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anonymous</span></code></pre></div></div><div class=paragraph><p>The corresponding environment variables would be</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash><span style=color:#fff;background-color:#272822>HEIMDALLCFG_RULES_MECHANISMS_AUTHENTICATORS_0_ID</span><span style=color:#f92672>=</span>anonymous_authenticator
<span style=color:#fff;background-color:#272822>HEIMDALLCFG_RULES_MECHANISMS__AUTHENTICATORS_0_TYPE</span><span style=color:#f92672>=</span>anonymous</code></pre></div></div></li><li><p>If a name of a property has <code>_</code> it must be escaped with an additional <code>_</code>.</p><div class=paragraph><p>E.g. the service name, appearing for heimdall for your tracing backend can be configured in a configuration file with</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>tracing</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>service_name</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foobar</span></code></pre></div></div><div class=paragraph><p>and using the environment variables with</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash><span style=color:#fff;background-color:#272822>HEIMDALLCFG_TRACING_SERVICE__NAME</span><span style=color:#f92672>=</span>foobar</code></pre></div></div></li></ul></div></div></div></div><div class=sect1><h2 id=_rule_set_configuration>Rule Set Configuration</h2><div class=sectionbody><div class=paragraph><p>Heimdall gets the rule sets from <a href=../../../docs/configuration/rules/providers/>rule providers</a>, which, depending on the provider, can load rules from a plain old configuration file, residing in the local file system, or even integrate with Kubernetes to load rules from custom resources.</p></div><div class=paragraph><p>In all cases, a single rule definition adheres to the schema defined in <a href=../../../docs/configuration/rules/configuration/>rule configuration</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>Usage of environment variables is not possible with, respectively in rule sets.</td></tr></tbody></table></div></div></div></linkable-headline-area></div><p class="text-end fst-italic fs-7">Last updated on <span class=fw-bold>Jun 11, 2023</span></p><div class="d-flex justify-content-between"><a href=../../../docs/getting_started/proxy_service_quickstart/><div class="fs-6 mb-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5.0 010 .708L5.707 8l5.647 5.646a.5.5.0 01-.708.708l-6-6a.5.5.0 010-.708l6-6a.5.5.0 01.708.0z"/></svg>Proxy Service Quickstart</div></a><a class=ms-auto href=../../../docs/operations/install/><div class="fs-6 mb-3">Install<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></div></a></div></main></div><footer class="footer py-4 py-md-5 px-4 px-md-3"><div class=container><div class=row><div class="col-lg-3 mb-3"><p class=fs-5>Heimdall</p><ul class="list-unstyled small text-muted"><li class=mb-2>2022-2023 © Heimdall Project Authors. All rights reserved.</li><li class=mb-2><a href=https://github.com/dadrus/heimdall/blob/master/LICENSE>Apache 2.0 licensed</a></li></ul></div><div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>Links</h5><ul class=list-unstyled><li class=mb-2><a href=../../../>Home</a></li><li class=mb-2><a href=../../../docs/welcome>Docs</a></li><li class=mb-2><a href=../../../openapi/>API</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Guides</h5><ul class=list-unstyled><li class=mb-2><a href=../../../docs/operations/install/>Install</a></li><li class=mb-2><a href=../../../docs/getting_started/>Getting Started</a></li><li class=mb-2><a href=../../../docs/guides/>Integration Guides</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Community</h5><ul class=list-unstyled><li class=mb-2><a href=https://github.com/dadrus/heimdall>Github</a></li><li class=mb-2><a href=https://discord.gg/qQgg8xKuyb>Discord</a></li></ul></div></div></div></footer><script src=../../../js/main.js defer></script>
<script src=https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js></script></body></html>