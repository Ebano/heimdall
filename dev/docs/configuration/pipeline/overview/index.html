<!doctype html><html lang=en><head><title>Pipeline Overview</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Heimdall is an open source identity & access proxy (IAP) and access control decision API, designed for cloud native applications"><meta name=dc.relation content="https://dadrus.github.io/"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=../../../../css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=../../../../favicon.ico></head><body><header class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand text-white" href=../../../../>Heimdall</a>
<button class=navbar-toggler type=button data-bs-toggle=offcanvas data-bs-target=#mainMenuContent aria-controls=mainMenuContent aria-expanded=false aria-label="Open main menu">
<span class=navbar-toggler-icon></span></button><div class="offcanvas offcanvas-end bg-dark" tabindex=-1 id=mainMenuContent data-bs-scroll=true aria-labelledby=mainMenuContentLabel><div class=offcanvas-header><h4 class="offcanvas-title text-white" id=mainMenuContentLabel>Heimdall</h4><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class=offcanvas-body><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item><a class='nav-link text-white' href=../../../../docs/welcome>Docs</a></li><li class=nav-item><a class='nav-link text-white' href=../../../../openapi/>API</a></li><li class="nav-item dropdown"><a class='nav-link dropdown-toggle text-white' href=# id="Get Started-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false>Get Started</a><ul class="dropdown-menu bg-dark" aria-labelledby="Get Started-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/concepts/>Concepts</a></li><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/decision_api_quickstart/>Decision API Quickstart</a></li><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/proxy_quickstart/>Proxy Quickstart</a></li></ul></li></ul><hr class="text-white-50 d-md-none"><ul class="navbar-nav flex-column ms-auto"><doc-version-select class="nav-item dropdown" version-file=/heimdall/data.json current-version=dev current-page=/docs/configuration/pipeline/overview/><button class="btn btn-dark dropdown-toggle me-4" data-bs-toggle=dropdown aria-expanded=false>
dev</button></doc-version-select></ul><ul class="navbar-nav flex-column"><li class="nav-item mb-1"><a class="nav-link text-white" href=https://github.com/dadrus/heimdall><svg xmlns="http://www.w3.org/2000/svg" role="img" width="20" height="20" fill="currentcolor" class="bi bi-github text-white" viewBox="0 0 16 16"><title>GitHub</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></nav></header><nav class="navbar navbar-expand-lg bg-light" aria-label="Docs menu"><div class=container-xxl><div class="row container-fluid"><doc-search class="col-auto me-auto" index-file=/heimdall/dev/index.json path-prefix=/heimdall/dev><form id=docs-search tabindex=1 class="doks-search position-relative me-auto"><input id=search class="form-control search-bar" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=search-suggestions class="shadow bg-white rounded collapse search-results"></div></form></doc-search><button class="col-auto navbar-toggler" type=button data-bs-toggle=collapse data-bs-target=#docsMenuContent aria-controls=docsMenuContent aria-expanded=false aria-label="Open docs menu"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-arrow-down-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.5 15a.5.5.0 00.5-.5V2.707l3.146 3.147a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 10.708.708L11 2.707V14.5a.5.5.0 00.5.5zm-7-14a.5.5.0 01.5.5v11.793l3.146-3.147a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 01.708-.708L4 13.293V1.5a.5.5.0 01.5-.5z"/></svg></button></div><div class="row d-md-none"><div class="col-2 collapse navbar-collapse" id=docsMenuContent><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/decision_api_quickstart/>Decision API Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/proxy_quickstart/>Proxy Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-929a28d261428029e61c0f81c6161fd71ba0b2fe aria-expanded=false>
Guides</button><div id=section-929a28d261428029e61c0f81c6161fd71ba0b2fe class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/nginx/>NGINX Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=true>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class="collapse show"><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/decision_api/>Decision API</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/management/>Management</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/configuration_types/>Common Configuration Options</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/tracing/>Tracing</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a aria-expanded=true>
Pipeline Handler</button><div id=section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/overview/>Pipeline Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/hydrators/>Hydrators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/mutators/>Mutators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/default_rule/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/rule_configuration/>Rule Definition</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/signature_keys_and_certificates/>Signature Keys & Certificates</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/configuration_types/>General Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/configuration_reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></div></div></div></nav><div class="container-xxl d-xxl-flex"><aside class="d-none d-md-block pe-4 pt-4 flex-xxl-shrink-0"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/decision_api_quickstart/>Decision API Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/proxy_quickstart/>Proxy Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-929a28d261428029e61c0f81c6161fd71ba0b2fe aria-expanded=false>
Guides</button><div id=section-929a28d261428029e61c0f81c6161fd71ba0b2fe class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/nginx/>NGINX Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=true>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class="collapse show"><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/decision_api/>Decision API</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/management/>Management</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/configuration_types/>Common Configuration Options</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/tracing/>Tracing</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a aria-expanded=true>
Pipeline Handler</button><div id=section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/overview/>Pipeline Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/hydrators/>Hydrators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/mutators/>Mutators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/default_rule/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/rule_configuration/>Rule Definition</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/signature_keys_and_certificates/>Signature Keys & Certificates</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/configuration_types/>General Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/configuration_reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></aside><main class="px-3 pt-4 flex-xxl-grow-0"><h1>Pipeline Overview</h1><div><div class=paragraph><p>This section explains the available pipeline handler and mechanisms in detail. Before diving onto the details of these, we recommend to make yourself familiar with the <a href=../../../../docs/getting_started/concepts/>concepts</a>.</p></div><div class=paragraph><p>The general pipeline handlers are:</p></div><div class=ulist><ul><li><p><a href=../../../../docs/configuration/pipeline/authenticators/>Authenticators</a> inspect HTTP requests, like the presence of a specific cookie, which represents the authentication object of the subject with the service and execute logic required to verify the authentication status and obtain information about that subject. A subject, could be a user who tries to use particular functionality of the upstream service, a machine (if you have machine-2-machine interaction), or something different. Authenticators ensure the subject has already been authenticated and the information available about it is valid.</p></li><li><p><a href=../../../../docs/configuration/pipeline/authorizers/>Authorizers</a> ensure that the subject obtained via an authenticator step has the required permissions to submit the given HTTP request and thus to execute the corresponding logic in the upstream service. E.g. a specific endpoint of the upstream service might only be accessible to a "user" from the "admin" group, or to an HTTP request if a specific HTTP header is set.</p></li><li><p><a href=../../../../docs/configuration/pipeline/hydrators/>Hydrators</a> enrich the information about the subject obtained in the authenticator step with further information, required by either the endpoint of the upstream service itself or an authorizer step. This can be handy if the actual authentication system doesn’t have all information about the subject (which is usually the case in microservice architectures), or if dynamic information about the subject, like the current location based on the IP address, is required.</p></li><li><p><a href=../../../../docs/configuration/pipeline/mutators/>Mutators</a> finalize the successful execution of the pipeline and transform the available information about the subject into a format expected, respectively required by the upstream service. This ranges from adding a query parameter, to a structured JWT in a specific header.</p></li><li><p><a href=../../../../docs/configuration/pipeline/error_handlers/>Error Handlers</a> are responsible for execution of logic if any of the handlers described above failed. These range from a simple error response to the client which sent the request to sophisticated handlers supporting complex logic and redirects.</p></li></ul></div><div class=sect1><h2 id=_general_configuration>General Configuration</h2><div class=sectionbody><div class=paragraph><p>All of the above said handlers must be configured in the <code>pipeline</code> section of Heimdall’s configuration as prototypes for usage in the actual rule definition. With other words only those handlers, which have been configured, can then be reused by a rule.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>pipeline</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>authenticators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#e6db74>&lt;list of authenticators&gt;</span>
  <span style=color:#a6e22e>authorizers</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#e6db74>&lt;list of authorizers&gt;</span>
  <span style=color:#a6e22e>hydrators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#e6db74>&lt;list of hydrators&gt;</span>
  <span style=color:#a6e22e>mutators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#e6db74>&lt;list of mutators&gt;</span>
  <span style=color:#a6e22e>error_handlers</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#e6db74>&lt;list of error handlers&gt;</span></code></pre></div></div><div class=paragraph><p>Each handler configuration entry must contain at least the following properties:</p></div><div class=ulist><ul><li><p><code>id</code> - The unique identifier of a handler. Identifiers are used to reference the required handler from a rule. You can choose whatever identifier, you want. It is just a name. It must however be unique across all defined handlers of a particular general type (like authenticator, authorizer, etc.).</p></li><li><p><code>type</code> - The specific type of pipeline handler.</p></li></ul></div><div class=paragraph><p>Depending on a pipeline handler type, there can be an additional <code>config</code> property, as the name implies, for the definition of handler’s specific configuration. Every handler specific type can be defined as many times as needed in the pipeline definition. However, for those, which don’t have a configuration, it doesn’t really make sense, as all of them would behave the same way.</p></div><div class=paragraph><p>For e.g. your authenticator definitions could look like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>pipeline</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>authenticators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foo</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bar</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>baz</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bla</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>bla</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bar</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>zab</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bar</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>oof</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bla</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>bar</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bla</span></code></pre></div></div><div class=paragraph><p>The above pipeline configures two instances of an imaginary authenticator of a specific type <code>bar</code> available via ids <code>foo</code> and <code>zab</code>, as well as two instances of an imaginary authenticator of a specific type <code>bla</code> available via ids <code>baz</code> and <code>oof</code>. The <code>baz</code> and <code>oof</code> authenticators are different, as they are configured differently, but <code>foo</code> and <code>zab</code> authenticators do not have a configuration. So, they behave the same way and there is actually no need to define two instances of them.</p></div><div class=paragraph><p>In simplest case a rule will just reuse a handler. In more complex cases a rule can reconfigure parts of it (More about rules configuration can be found <a href=../../../../docs/configuration/rules/overview/>here</a>). Which parts can be reconfigured are handler specific and described in the documentation of each handler.</p></div><div class=paragraph><p>Here is an example which configures a couple of prototypes:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>pipeline</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>authenticators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>noop_authn</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>noop</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anon_authn</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>anonymous</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>opaque_auth_token_authn</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>oauth2_introspection</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>introspection_endpoint</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://hydra:4445/oauth2/introspect</span>
      <span style=color:#a6e22e>assertions</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>issuers</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>http://127.0.0.1:4444/</span>
  <span style=color:#a6e22e>authorizers</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>allow_all_authz</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>allow</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>deny_all_authz</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>deny</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>local_authz</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>local</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>script</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>|</span>
          <span style=color:#e6db74>if (!heimdall.Subject.Attributes.group_manager.groups[&#34;foo&#34;]) {</span>
            <span style=color:#e6db74>raise(&#34;user not in the expected group&#34;)</span>
          <span style=color:#e6db74>}</span>
  <span style=color:#a6e22e>hydrators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>group_manager</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>generic</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>endpoint</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://group-manager.local/groups</span>
          <span style=color:#a6e22e>method</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>GET</span>
        <span style=color:#a6e22e>forward_headers</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>Authorization</span>
        <span style=color:#a6e22e>cache_ttl</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>1m</span>
  <span style=color:#a6e22e>mutators</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>noop_mut</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>noop</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>jwt_mut</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>jwt</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>ttl</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>5m</span>
        <span style=color:#a6e22e>claims</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>|</span>
            <span style=color:#e6db74>{</span>
              <span style=color:#e6db74>{{ $user_name := .Subject.Attributes.identity.user_name -}}</span>
              <span style=color:#e6db74>&#34;email&#34;: {{ quote .Subject.Attributes.identity.email }},</span>
              <span style=color:#e6db74>&#34;email_verified&#34;: {{ .Subject.Attributes.identity.email_verified }},</span>
              <span style=color:#e6db74>{{ if $user_name -}}</span>
              <span style=color:#e6db74>&#34;name&#34;: {{ quote $user_name }}</span>
              <span style=color:#e6db74>{{ else -}}</span>
              <span style=color:#e6db74>&#34;name&#34;: {{ quote $email }}</span>
              <span style=color:#e6db74>{{ end -}}</span>
            <span style=color:#e6db74>}</span>
  <span style=color:#a6e22e>error_handlers</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>default</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>default</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authenticate_with_kratos</span>
      <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>redirect</span>
      <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>to</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://127.0.0.1:4433/self-service/login/browser</span>
        <span style=color:#a6e22e>return_to_query_parameter</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>return_to</span>
        <span style=color:#a6e22e>when</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>error</span><span style=color:#fff;background-color:#272822>:</span>
              <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authentication_error</span>
              <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authorization_error</span>
            <span style=color:#a6e22e>request_headers</span><span style=color:#fff;background-color:#272822>:</span>
              <span style=color:#a6e22e>Accept</span><span style=color:#fff;background-color:#272822>:</span>
                <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>text/html</span></code></pre></div></div></div></div><div class=sect1><h2 id=_templating>Templating</h2><div class=sectionbody><div class=paragraph><p>Some pipeline handlers support templating using <a href=https://golang.org/pkg/text/template/>Golang Text Templates</a>. To ease the usage, all <a href=http://masterminds.github.io/sprig/>sprig</a> functions as well as a <code>urlenc</code> function are available. Latter is handy if you need to generate request body or query parameters e.g. for communication with further systems. In addition to the above said functions, heimdall makes the following objects and functions available to the template:</p></div><div class=ulist><ul><li><p><code>Subject</code> - object, providing access to all attributes available for the given subject.</p><div class=paragraph><p>The type of this object is <code>heimdall.Subject</code> and is defined as follows:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=go><span style=color:#f92672>type</span> <span style=color:#fff;background-color:#272822>Subject</span> <span style=color:#f92672>struct</span> <span style=color:#fff;background-color:#272822>{</span>
	<span style=color:#75715e>// The id of the subject</span>
	<span style=color:#fff;background-color:#272822>ID</span>         <span style=color:#66d9ef>string</span>
	<span style=color:#75715e>// All attributes known about the subject</span>
	<span style=color:#fff;background-color:#272822>Attributes</span> <span style=color:#f92672>map</span><span style=color:#fff;background-color:#272822>[</span><span style=color:#66d9ef>string</span><span style=color:#fff;background-color:#272822>]</span><span style=color:#fff;background-color:#272822>any</span>
<span style=color:#fff;background-color:#272822>}</span></code></pre></div></div></li><li><p><code>RequestMethod</code> - function, providing access to the used HTTP method for the given request. Returns a <code>string</code>.</p></li><li><p><code>RequestURL</code> - function, providing access to the matched URL of the given request. Returns a <code>string</code>.</p></li><li><p><code>RequestClientIPs</code> - function, providing information about the client IPs known about the request. Returns a <code>string array</code>.</p></li><li><p><code>RequestHeader</code> - function, expecting the name of a header as input. Returns the value of the header as <code>string</code> if present in the HTTP request. If not present an empty string (<code>""</code>) is returned.</p></li><li><p><code>RequestCookie</code> - function, expecting the name of a cookie as input. Returns the value of the cookie as <code>string</code> if present in the HTTP request. If not present an empty string (<code>""</code>) is returned.</p></li><li><p><code>RequestQueryParameter</code> - function, expecting the name of a query parameter as input. Returns the value of the query parameter as <code>string</code> if present in the HTTP request. If not present an empty string (<code>""</code>) is returned.</p></li></ul></div><div class=exampleblock><div class=title>Example 1. Template, rendering a JSON object</div><div class=content><div class=paragraph><p>Imagine, we have a <code>POST</code> request for the URL <code>http://foobar.baz/zab</code>, with a header <code>X-Foo</code> set to <code>bar</code> value, for which heimdall was able to identify a subject, with <code>ID=foo</code> and which <code>Attributes</code> contain an entry <code>email: foo@bar</code>, then you can generate a JSON object with this information with the following template:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=go><span style=color:#fff;background-color:#272822>{</span>
  <span style=color:#e6db74>&#34;subject_id&#34;</span><span style=color:#f92672>:</span> <span style=color:#fff;background-color:#272822>{{</span> <span style=color:#fff;background-color:#272822>quote</span> <span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>Subject</span><span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>ID</span> <span style=color:#fff;background-color:#272822>}},</span>
  <span style=color:#e6db74>&#34;email&#34;</span><span style=color:#f92672>:</span> <span style=color:#fff;background-color:#272822>{{</span> <span style=color:#fff;background-color:#272822>quote</span> <span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>Subject</span><span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>Attributes</span><span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>email</span> <span style=color:#fff;background-color:#272822>}},</span>
  <span style=color:#e6db74>&#34;request_url&#34;</span><span style=color:#f92672>:</span> <span style=color:#fff;background-color:#272822>{{</span> <span style=color:#fff;background-color:#272822>quote</span> <span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>RequestURL</span> <span style=color:#fff;background-color:#272822>}},</span>
  <span style=color:#e6db74>&#34;request_method&#34;</span><span style=color:#f92672>:</span> <span style=color:#fff;background-color:#272822>{{</span> <span style=color:#fff;background-color:#272822>quote</span> <span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>RequestMethod</span> <span style=color:#fff;background-color:#272822>}},</span>
  <span style=color:#e6db74>&#34;x_foo_value&#34;</span><span style=color:#f92672>:</span> <span style=color:#fff;background-color:#272822>{{</span> <span style=color:#f92672>.</span><span style=color:#fff;background-color:#272822>RequestHeader</span> <span style=color:#e6db74>&#34;X-Foo&#34;</span> <span style=color:#f92672>|</span> <span style=color:#fff;background-color:#272822>quote</span> <span style=color:#fff;background-color:#272822>}}</span>
<span style=color:#fff;background-color:#272822>}</span></code></pre></div></div><div class=paragraph><p>This will result in the following JSON object:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=json><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;subject_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;foo&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;email&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;foo@bar.baz&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;request_url&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;http://foobar.baz/zab&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;request_method&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;POST&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;x_foo_value&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;bar&#34;</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>}</span></code></pre></div></div></div></div><div class=paragraph><p>You can find further examples as part of handler descriptions, supporting templating.</p></div></div></div><div class=sect1><h2 id=_scripting>Scripting</h2><div class=sectionbody><div class=paragraph><p>Some authorizers, which verify the presence or values of particular attributes of the subject can make use of <a href=https://262.ecma-international.org/5.1/>ECMAScript 5.1(+)</a>. Heimdall uses <a href=https://github.com/dop251/goja>goja</a> as ECMAScript engine. In addition to the general ECMAScript functionality, heimdall makes following objects and functions to the script:</p></div><div class=ulist><ul><li><p>a <code>console</code> object implementing a <code>log</code> function to enable logging from the script. This can become handy during development or debugging. The output is only available if <code>debug</code> log level is set.</p></li><li><p>a <code>heimdall</code> object, which, depending on the authorizer, contains either</p><div class=ulist><ul><li><p>the <code>Subject</code> object and the request context functions, like <code>RequestMethod</code> (already described in <a href=#_templating>Templating</a> section), or</p></li><li><p>the <code>Payload</code> object, which allows access to the response from remote authorization endpoints.</p></li></ul></div></li></ul></div><div class=exampleblock><div class=title>Example 2. Script, rendering a JSON object</div><div class=content><div class=paragraph><p>The following script creates the same JSON object, as in the example provided in the previous section, logs however also a statement</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=javascript><span style=color:#fff;background-color:#272822>console</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>log</span><span style=color:#fff;background-color:#272822>(</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>This statement is only present in the logs, if the log level is set to debug</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>)</span>

<span style=color:#66d9ef>var</span> <span style=color:#fff;background-color:#272822>data</span> <span style=color:#f92672>=</span> <span style=color:#fff;background-color:#272822>{</span>
    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>subject_id</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>heimdall</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>Subject</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>ID</span><span style=color:#fff;background-color:#272822>,</span>
    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>email</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>heimdall</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>Subject</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>Attributes</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>email</span><span style=color:#fff;background-color:#272822>,</span>
    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>request_url</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>heimdall</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>RequestURL</span><span style=color:#fff;background-color:#272822>(),</span>
    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>request_method</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>heimdall</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>RequestMethod</span><span style=color:#fff;background-color:#272822>(),</span>
    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>x_foo_value</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>heimdall</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>RequestHeader</span><span style=color:#fff;background-color:#272822>(</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>X-Foo</span><span style=color:#e6db74>&#34;</span><span style=color:#fff;background-color:#272822>)</span>
<span style=color:#fff;background-color:#272822>}</span>

<span style=color:#fff;background-color:#272822>data</span></code></pre></div></div><div class=paragraph><p>The result is again the already known JSON object.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=json><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;subject_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;foo&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;email&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;foo@bar.baz&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;request_url&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;http://foobar.baz/zab&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;request_method&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;POST&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
    </span><span style=color:#fff;background-color:#272822>&#34;x_foo_value&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;bar&#34;</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>}</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 3. Script, checking simple response from an Open Policy Agent endpoint</div><div class=content><div class=paragraph><p>Imagine you, respectively heimdall, sends something like <code>'{ "input": { "user_id": "foobar", "access": "write" } }'</code> to your OPA service. A typical "yes" or "no" response from OPA will contain a payload like <code>{ "result": true }</code> or <code>{ "result": false }</code> which obviously contains the authorization status. To check this status, you could use the following script.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=javascript><span style=color:#fff;background-color:#272822>heimdall</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>Payload</span><span style=color:#fff;background-color:#272822>.</span><span style=color:#fff;background-color:#272822>result</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>true</span></code></pre></div></div></div></div><div class=paragraph><p>You can find further examples as part of handler descriptions, supporting scripting.</p></div></div></div></div><p class="text-end fst-italic fs-7">Last updated on <span class=fw-bold>Sep 23, 2022</span></p><div class="d-flex justify-content-between"><a href=../../../../docs/configuration/observability/tracing/><div class="fs-6 mb-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5.0 010 .708L5.707 8l5.647 5.646a.5.5.0 01-.708.708l-6-6a.5.5.0 010-.708l6-6a.5.5.0 01.708.0z"/></svg>Tracing</div></a><a class=ms-auto href=../../../../docs/configuration/pipeline/authenticators/><div class="fs-6 mb-3">Authenticators<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></div></a></div></main></div><footer class="footer py-4 py-md-5 px-4 px-md-3"><div class=container><div class=row><div class="col-lg-3 mb-3"><p class=fs-5>Heimdall</p><ul class="list-unstyled small text-muted"><li class=mb-2>2022 © Heimdall Project Authors. All rights reserved.</li><li class=mb-2><a href=https://github.com/dadrus/heimdall/blob/master/LICENSE>Apache 2.0 licensed</a></li></ul></div><div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>Links</h5><ul class=list-unstyled><li class=mb-2><a href=../../../../>Home</a></li><li class=mb-2><a href=../../../../docs/welcome>Docs</a></li><li class=mb-2><a href=../../../../openapi/>API</a></li><li class=mb-2><a href=../../../../docs/getting_started/concepts/>Get Started</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Guides</h5><ul class=list-unstyled><li class=mb-2><a href=../../../../docs/operations/install/>Install</a></li><li class=mb-2><a href=../../../../docs/guides/nginx/>NGINX Integration</a></li><li class=mb-2><a href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Community</h5><ul class=list-unstyled><li class=mb-2><a href=https://github.com/dadrus/heimdall>Github</a></li><li class=mb-2><a href=https://github.com/dadrus/heimdall/issues>Issues</a></li><li class=mb-2><a href=https://github.com/dadrus/heimdall/discussions>Discussions</a></li></ul></div></div></div></footer><script src=../../../../js/main.js defer></script>
<script src=https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js></script></body></html>