<!doctype html><html lang=en><head><title>Error Handlers</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Heimdall is an open source identity & access proxy (IAP) and access control decision API, designed for cloud native applications"><meta name=dc.relation content="https://dadrus.github.io/"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=../../../../css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=../../../../favicon.ico></head><body><header class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand text-white" href=../../../../>Heimdall</a>
<button class=navbar-toggler type=button data-bs-toggle=offcanvas data-bs-target=#mainMenuContent aria-controls=mainMenuContent aria-expanded=false aria-label="Open main menu">
<span class=navbar-toggler-icon></span></button><div class="offcanvas offcanvas-end bg-dark" tabindex=-1 id=mainMenuContent data-bs-scroll=true aria-labelledby=mainMenuContentLabel><div class=offcanvas-header><h4 class="offcanvas-title text-white" id=mainMenuContentLabel>Heimdall</h4><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class=offcanvas-body><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item><a class='nav-link text-white' href=../../../../docs/welcome>Docs</a></li><li class=nav-item><a class='nav-link text-white' href=../../../../openapi/>API</a></li><li class="nav-item dropdown"><a class='nav-link dropdown-toggle text-white' href=# id="Get Started-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false>Get Started</a><ul class="dropdown-menu bg-dark" aria-labelledby="Get Started-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/concepts/>Concepts</a></li><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/decision_api_quickstart/>Decision API Quickstart</a></li><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/proxy_quickstart/>Proxy Quickstart</a></li></ul></li></ul><hr class="text-white-50 d-md-none"><ul class="navbar-nav flex-column ms-auto"><doc-version-select class="nav-item dropdown" version-file=/heimdall/data.json current-version=dev current-page=/docs/configuration/pipeline/error_handlers/><button class="btn btn-dark dropdown-toggle me-4" data-bs-toggle=dropdown aria-expanded=false>
dev</button></doc-version-select></ul><ul class="navbar-nav flex-column"><li class="nav-item mb-1"><a class="nav-link text-white" href=https://github.com/dadrus/heimdall><svg xmlns="http://www.w3.org/2000/svg" role="img" width="20" height="20" fill="currentcolor" class="bi bi-github text-white" viewBox="0 0 16 16"><title>GitHub</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></nav></header><nav class="navbar navbar-expand-lg bg-light" aria-label="Docs menu"><div class=container-xxl><div class="row container-fluid"><doc-search class="col-auto me-auto" index-file=/heimdall/dev/index.json path-prefix=/heimdall/dev><form id=docs-search tabindex=1 class="doks-search position-relative me-auto"><input id=search class="form-control search-bar" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=search-suggestions class="shadow bg-white rounded collapse search-results"></div></form></doc-search><button class="col-auto navbar-toggler" type=button data-bs-toggle=collapse data-bs-target=#docsMenuContent aria-controls=docsMenuContent aria-expanded=false aria-label="Open docs menu"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-arrow-down-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.5 15a.5.5.0 00.5-.5V2.707l3.146 3.147a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 10.708.708L11 2.707V14.5a.5.5.0 00.5.5zm-7-14a.5.5.0 01.5.5v11.793l3.146-3.147a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 01.708-.708L4 13.293V1.5a.5.5.0 01.5-.5z"/></svg></button></div><div class="row d-md-none"><div class="col-2 collapse navbar-collapse" id=docsMenuContent><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/decision_api_quickstart/>Decision API Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/proxy_quickstart/>Proxy Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-929a28d261428029e61c0f81c6161fd71ba0b2fe aria-expanded=false>
Guides</button><div id=section-929a28d261428029e61c0f81c6161fd71ba0b2fe class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/nginx/>NGINX Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=true>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class="collapse show"><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/decision_api/>Decision API</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/management/>Management</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/configuration_types/>Common Configuration Options</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/tracing/>Tracing</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a aria-expanded=true>
Pipeline Handler</button><div id=section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/overview/>Pipeline Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/hydrators/>Hydrators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/mutators/>Mutators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/error_handlers/>Error Handlers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/configuration_types/>Configuration Types</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/default_rule/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/rule_configuration/>Rule Definition</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/signature_keys_and_certificates/>Signature Keys & Certificates</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/configuration/>Static Configuration</a></li></ul></div></li></ul></div></li></ul></div></div></div></nav><div class="container-xxl d-xxl-flex"><aside class="d-none d-md-block pe-4 pt-4 flex-xxl-shrink-0"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/decision_api_quickstart/>Decision API Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/proxy_quickstart/>Proxy Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-929a28d261428029e61c0f81c6161fd71ba0b2fe aria-expanded=false>
Guides</button><div id=section-929a28d261428029e61c0f81c6161fd71ba0b2fe class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/nginx/>NGINX Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=true>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class="collapse show"><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/decision_api/>Decision API</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/management/>Management</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/configuration_types/>Common Configuration Options</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/tracing/>Tracing</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a aria-expanded=true>
Pipeline Handler</button><div id=section-312012dc6ebfc0a65762f202c68d0adaab7cfe6a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/overview/>Pipeline Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/hydrators/>Hydrators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/mutators/>Mutators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/error_handlers/>Error Handlers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/pipeline/configuration_types/>Configuration Types</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/default_rule/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/rule_configuration/>Rule Definition</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/signature_keys_and_certificates/>Signature Keys & Certificates</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/configuration/>Static Configuration</a></li></ul></div></li></ul></div></li></ul></aside><main class="px-3 pt-4 flex-xxl-grow-0"><h1>Error Handlers</h1><div><div class=paragraph><p>Error Handlers are responsible for execution of logic if any of the handlers <a href=../../../../docs/configuration/pipeline/authenticators/>authenticators</a>, <a href=../../../../docs/configuration/pipeline/authorizers/>authorizers</a>, <a href=../../../../docs/configuration/pipeline/hydrators/>hydrators</a> or <a href=../../../../docs/configuration/pipeline/mutators/>mutators</a> fail. The error handlers range from a simple error response to the client which sent the request to sophisticated handlers supporting complex logic and redirects.</p></div><div class=paragraph><p>The following section describes the available error handler types in more detail.</p></div><div class=sect1><h2 id=_error_handler_types>Error Handler Types</h2><div class=sectionbody><div class=sect2><h3 id=_default>Default</h3><div class=paragraph><p>This error handler is always there and is executed if no other error handler is responsible for the handling of an error. Actually, there is no need to explicitly configure it. The only exception is to allow overriding the <a href=../../../../docs/configuration/rules/overview/#_default_rule>default rule</a>'s error handler chain in a rule for performance reasons (if configured error handlers in the default rule should not be considered). This error handler type doesn’t have any configuration options.</p></div><div class=paragraph><p>To enable the usage of this error handler, you have to set the <code>type</code> property to <code>default</code>.</p></div><div class=exampleblock><div class=title>Example 1. Configuring Default error handler to enable referencing it from rules</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foo</span>
<span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>default</span></code></pre></div></div></div></div></div><div class=sect2><h3 id=_redirect>Redirect</h3><div class=paragraph><p>This error handler allows to redirect the client to another endpoint, e.g. to let the user authenticate. Technically this error handler returns e.g. a HTTP <code>302 Found</code> response code and sets the HTTP <code>Location</code> header.</p></div><div class=paragraph><p>To enable the usage of this hydrator, you have to set the <code>type</code> property to <code>redirect</code>.</p></div><div class=paragraph><p>Configuration using the <code>config</code> property is mandatory. Following properties are available:</p></div><div class=ulist><ul><li><p><strong><code>to</code></strong>: <em>URL</em> (mandatory, not overridable)</p><div class=paragraph><p>The url to redirect the client to. If no <code>return_to_query_parameter</code> is defined, the value of the HTTP <code>Location</code> hader is set to the configured value.</p></div></li><li><p><strong><code>return_to_query_parameter</code></strong>: <em>string</em> (optional, not overridable)</p><div class=paragraph><p>If you want to return the user back to the url, Heimdall was handling when this error handler kicked in and your authentication system supports this by considering a specific query parameter, you can configure it here.</p></div></li><li><p><strong><code>code</code></strong>: <em>int</em> (optional, not overridable)</p><div class=paragraph><p>The code to be used for the redirect. Defaults to <code>302 Found</code>. Heimdall does not check the configured code for HTTP redirect validity!</p></div></li><li><p><strong><code>when</code></strong>: <em><a href=../../../../docs/configuration/pipeline/configuration_types/#_error_condition>Error Condition</a> array</em> (mandatory, overridable)</p><div class=paragraph><p>Conditions, which must hold true for this error handler to execute. The defined conditions are evaluated using a boolean or. So at least one of the defined conditions must evaluate to <code>true</code> to have this error handler executed.</p></div></li></ul></div><div class=exampleblock><div class=title>Example 2. Redirect error handler configuration</div><div class=content><div class=paragraph><p>The redirect error handler below is configured to kick in if either
* a first error condition evaluates to true. This condition is for web requests (HTTP <code>Accept</code> header contains <code>text/html</code>) if an <code>authentication_error</code> error occurred (an error raised by authenticators). In this case, it will redirect the client (for web requests, usually a browser) to <code>http://127.0.0.1:4433/self-service/login/browser</code> and also add the <code>return_to</code> query parameter with the current url to the redirect url.
* Or if a second condition evaluates to true. The only difference to the previous one is the error type, which is <code>authorization_error</code> in this case.</p></div><div class=paragraph><p>So, e.g. if Heimdall was handling the request for `http://my-service.local/foo` and run into an error like described above, the value of the HTTP <code>Location</code> header will be set to <code>http://127.0.0.1:4433/self-service/login/browser?return_to=http%3A%2F%2Fmy-service.local%2Ffoo</code></p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authenticate_with_kratos</span>
<span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>redirect</span>
<span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>to</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://127.0.0.1:4433/self-service/login/browser</span>
  <span style=color:#a6e22e>return_to_query_parameter</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>return_to</span>
  <span style=color:#a6e22e>when</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>error</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authentication_error</span>
      <span style=color:#a6e22e>request_headers</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>Accept</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>text/html</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>error</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authorization_error</span>
      <span style=color:#a6e22e>request_headers</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>Accept</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>text/html</span></code></pre></div></div><div class=paragraph><p>In this case the error condition can actually be simplified, so the error handler configuration can look like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authenticate_with_kratos</span>
<span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>redirect</span>
<span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>to</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://127.0.0.1:4433/self-service/login/browser</span>
  <span style=color:#a6e22e>return_to_query_parameter</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>return_to</span>
  <span style=color:#a6e22e>when</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>error</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authentication_error</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authorization_error</span>
      <span style=color:#a6e22e>request_headers</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>Accept</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>text/html</span></code></pre></div></div></div></div></div><div class=sect2><h3 id=_www_authenticate>WWW-Authenticate</h3><div class=paragraph><p>This error handler responds with HTTP <code>401 Unauthorized</code> and a <code>WWW-Authenticate</code> HTTP header set. As of now, this error handler is the only one error handler, which transforms Heimdall into an authentication system, a very simple one though ;). By configuring this error handler you can implement the <a href=https://datatracker.ietf.org/doc/html/rfc7617>Basic HTTP Authentication Scheme</a> by also making use of the <a href=../../../../docs/configuration/pipeline/authenticators/#_basic_auth>Basic Auth</a> authenticator. Without that authenticator, the usage of this error handler does actually not make any sense.</p></div><div class=paragraph><p>To enable the usage of this hydrator, you have to set the <code>type</code> property to <code>www_authenticate</code>.</p></div><div class=paragraph><p>Configuration using the <code>config</code> property is mandatory. Following properties are available:</p></div><div class=ulist><ul><li><p><strong><code>realm</code></strong>: <em>string</em> (optional, overridable)</p><div class=paragraph><p>The "realm" according to <a href=https://datatracker.ietf.org/doc/html/rfc7235#section-2.2>RFC 7235, section 2.2</a>. Defaults to "Please authenticate".</p></div></li><li><p><strong><code>when</code></strong>: <em><a href=../../../../docs/configuration/pipeline/configuration_types/#_error_condition>Error Condition</a> array</em> (optional, overridable)</p><div class=paragraph><p>Conditions, which must hold true for this error handler to execute. The defined conditions are evaluated using a boolean or. So at least one of the defined conditions must evaluate to <code>true</code> to have this error handler executed.</p></div></li></ul></div><div class=exampleblock><div class=title>Example 3. Configuration of WWW-Authenticate error handler</div><div class=content><div class=paragraph><p>The www authenticate error handler below is configured to kick in for web requests (HTTP <code>Accept</code> header contains <code>text/html</code>) if an <code>authentication_error</code> error occurred (an error raised by authenticators) and has been raised by an authenticator with id equal to <code>basic_auth_authenticator</code>. In this case, it will respond with HTTP <code>401 Unauthorized</code> and a <code>WWW-Authenticate</code> header set to <code>Basic realm="My fancy app"</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>basic_authenticate</span>
<span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>www_authenticate</span>
<span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>realm</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>My</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>fancy</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>app&#34;</span>
  <span style=color:#a6e22e>when</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>error</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>authentication_error</span>
          <span style=color:#a6e22e>raised_by</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>basic_auth_authenticator</span>
      <span style=color:#a6e22e>request_headers</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>Accept</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#fff;background-color:#272822>-</span> <span style=color:#e6db74>text/html</span></code></pre></div></div></div></div></div></div></div></div><p class="text-end fst-italic fs-7">Last updated on <span class=fw-bold>Sep 23, 2022</span></p><div class="d-flex justify-content-between"><a href=../../../../docs/configuration/pipeline/mutators/><div class="fs-6 mb-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5.0 010 .708L5.707 8l5.647 5.646a.5.5.0 01-.708.708l-6-6a.5.5.0 010-.708l6-6a.5.5.0 01.708.0z"/></svg>Mutators</div></a><a class=ms-auto href=../../../../docs/configuration/pipeline/configuration_types/><div class="fs-6 mb-3">Configuration Types<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></div></a></div></main></div><footer class="footer py-4 py-md-5 px-4 px-md-3"><div class=container><div class=row><div class="col-lg-3 mb-3"><p class=fs-5>Heimdall</p><ul class="list-unstyled small text-muted"><li class=mb-2>2022 © Heimdall Project Authors. All rights reserved.</li><li class=mb-2><a href=https://github.com/dadrus/heimdall/blob/master/LICENSE>Apache 2.0 licensed</a></li></ul></div><div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>Links</h5><ul class=list-unstyled><li class=mb-2><a href=../../../../>Home</a></li><li class=mb-2><a href=../../../../docs/welcome>Docs</a></li><li class=mb-2><a href=../../../../openapi/>API</a></li><li class=mb-2><a href=../../../../docs/getting_started/concepts/>Get Started</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Guides</h5><ul class=list-unstyled><li class=mb-2><a href=../../../../docs/operations/install/>Install</a></li><li class=mb-2><a href=../../../../docs/guides/nginx/>NGINX Integration</a></li><li class=mb-2><a href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Community</h5><ul class=list-unstyled><li class=mb-2><a href=https://github.com/dadrus/heimdall>Github</a></li><li class=mb-2><a href=https://github.com/dadrus/heimdall/issues>Issues</a></li><li class=mb-2><a href=https://github.com/dadrus/heimdall/discussions>Discussions</a></li></ul></div></div></div></footer><script src=../../../../js/main.js defer></script>
<script src=https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js></script></body></html>