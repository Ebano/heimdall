<!doctype html><html lang=en><head><title>Rule Providers</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An open source Identity Aware Proxy and an Access Control Decision service for cloud native applications"><meta name=dc.relation content="https://dadrus.github.io/"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=../../../../css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=../../../../favicon.ico></head><body><header class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand text-white" href=../../../../ style=font-weight:500;font-size:1.5rem>Heimdall</a>
<button class=navbar-toggler type=button data-bs-toggle=offcanvas data-bs-target=#mainMenuContent aria-controls=mainMenuContent aria-expanded=false aria-label="Open main menu">
<span class=navbar-toggler-icon></span></button><div class="offcanvas offcanvas-end bg-dark" tabindex=-1 id=mainMenuContent data-bs-scroll=true aria-labelledby=mainMenuContentLabel><div class=offcanvas-header><h5 class="offcanvas-title text-white" id=mainMenuContentLabel>Heimdall</h5><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class=offcanvas-body><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item style=display:flex><a class='nav-link text-white' href=../../../../docs/welcome style=align-self:center>Docs</a></li><li class=nav-item style=display:flex><a class='nav-link text-white' href=../../../../openapi/ style=align-self:center>API</a></li><li class="nav-item dropdown" style=display:flex><a class='nav-link dropdown-toggle text-white' href=# id="Get Started-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false style=align-self:center>Get Started</a><ul class="dropdown-menu bg-dark" aria-labelledby="Get Started-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/concepts/>Concepts</a></li><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li><a class='dropdown-item text-white' href=../../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li></ul></li><li class="nav-item dropdown" style=display:flex><a class='nav-link dropdown-toggle text-white' href=# id="Integration Guides-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false style=align-self:center>Integration Guides</a><ul class="dropdown-menu bg-dark" aria-labelledby="Integration Guides-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li><a class='dropdown-item text-white' href=../../../../docs/guides/nginx/>NGINX Integration</a></li><li><a class='dropdown-item text-white' href=../../../../docs/guides/envoy/>Envoy Integration</a></li><li><a class='dropdown-item text-white' href=../../../../docs/guides/opa/>Integration with OPA</a></li><li><a class='dropdown-item text-white' href=../../../../docs/guides/contour/>Contour Integration</a></li><li><a class='dropdown-item text-white' href=../../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li><a class='dropdown-item text-white' href=../../../../docs/guides/haproxy/>HAProxy Integration</a></li></ul></li></ul><hr class="text-white-50 d-md-none"><ul class="navbar-nav flex-column ms-auto" style=align-self:center><doc-version-select class="nav-item dropdown" version-file=/heimdall/data.json current-version=dev current-page=/docs/configuration/rules/providers/><button class="btn btn-dark dropdown-toggle me-4" data-bs-toggle=dropdown aria-expanded=false>
dev</button></doc-version-select></ul><ul class="navbar-nav flex-column"><li class="nav-item mb-1" style=display:flex><a class="nav-link text-white" style=align-self:center href=https://github.com/dadrus/heimdall><svg xmlns="http://www.w3.org/2000/svg" role="img" width="20" height="20" fill="currentcolor" class="bi bi-github text-white" viewBox="0 0 16 16"><title>GitHub</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></nav></header><nav class="navbar navbar-expand-lg bg-light" aria-label="Docs menu"><div class=container-xxl><div class="row container-fluid"><doc-search class="col-auto me-auto" index-file=/heimdall/dev/index.json path-prefix=/heimdall/dev><form id=docs-search tabindex=1 class="doks-search position-relative me-auto"><input id=search class="form-control search-bar" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=search-suggestions class="shadow bg-white rounded collapse search-results"></div></form></doc-search><button class="col-auto navbar-toggler" type=button data-bs-toggle=collapse data-bs-target=#docsMenuContent aria-controls=docsMenuContent aria-expanded=false aria-label="Open docs menu"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-arrow-down-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.5 15a.5.5.0 00.5-.5V2.707l3.146 3.147a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 10.708.708L11 2.707V14.5a.5.5.0 00.5.5zm-7-14a.5.5.0 01.5.5v11.793l3.146-3.147a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 01.708-.708L4 13.293V1.5a.5.5.0 01.5-.5z"/></svg></button></div><div class="row d-md-none"><div class="col-2 collapse navbar-collapse" id=docsMenuContent><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-63bf47d7b1e91548862e3da277e46e20a4b75401 aria-expanded=false>
Integration Guides</button><div id=section-63bf47d7b1e91548862e3da277e46e20a4b75401 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/nginx/>NGINX Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/envoy/>Envoy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/opa/>Integration with OPA</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/contour/>Contour Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/haproxy/>HAProxy Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=true>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class="collapse show"><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/decision/>Decision</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/management/>Management</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/tracing/>Tracing</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/profiling/>Runtime Profiling</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=true>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 aria-expanded=false>
Pipeline Mechanisms</button><div id=section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/overview/>Mechanisms Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/contextualizers/>Contextualizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/finalizers/>Finalizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/configuration/>Rule</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/default/>Default Rule</a></li><li class=nav-item><a class="nav-link fw-bold" href=../../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/cryptographic_material/>Cryptographic Material</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/types/>Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></div></div></div></nav><div class="container-xxl d-xxl-flex"><aside class="d-none d-md-block pe-4 pt-4 flex-xxl-shrink-0"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=false>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-63bf47d7b1e91548862e3da277e46e20a4b75401 aria-expanded=false>
Integration Guides</button><div id=section-63bf47d7b1e91548862e3da277e46e20a4b75401 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/guides/traefik/>Traefik Proxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/nginx/>NGINX Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/envoy/>Envoy Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/opa/>Integration with OPA</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/contour/>Contour Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li class=nav-item><a class=nav-link href=../../../../docs/guides/haproxy/>HAProxy Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=true>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class="collapse show"><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/decision/>Decision</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/services/management/>Management</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/tracing/>Tracing</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/observability/profiling/>Runtime Profiling</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=true>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 aria-expanded=false>
Pipeline Mechanisms</button><div id=section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/overview/>Mechanisms Overview</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/contextualizers/>Contextualizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/finalizers/>Finalizers</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/pipeline_mechanisms/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/configuration/>Rule</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/rules/default/>Default Rule</a></li><li class=nav-item><a class="nav-link fw-bold" href=../../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/cryptographic_material/>Cryptographic Material</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/types/>Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../../docs/configuration/reference/reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></aside><main class="px-3 pt-4 flex-xxl-grow-0"><h1>Rule Providers</h1><div><linkable-headline-area><div class=paragraph><p>Providers define the sources to load the <a href=../../../../docs/configuration/rules/configuration/#_rule_set>Rule Sets</a> from. These make heimdall’s behavior dynamic. All providers, you want to enable for a heimdall instance must be configured within the <code>providers</code> section of heimdall’s configuration.</p></div><div class=paragraph><p>Supported providers, including the corresponding configuration options are described below</p></div><div class=sect1><h2 id=_filesystem>Filesystem</h2><div class=sectionbody><div class=paragraph><p>The filesystem provider allows loading of rule sets in a format defined in <a href=../../../../docs/configuration/rules/configuration/#_rule_set>Rule Sets</a> from a file system. The configuration of this provider goes into the <code>file_system</code> property. This provider is handy for e.g. starting playing around with heimdall, e.g. locally, or using Docker, as well as if your deployment strategy considers deploying a heimdall instance as a Side-Car for each of your services.</p></div><div class=paragraph><p>Following configuration options are supported:</p></div><div class=ulist><ul><li><p><strong><code>src</code></strong>: <em>string</em> (mandatory)</p><div class=paragraph><p>Can either be a single file, containing a rule set, or a directory with files, each containing a rule set.</p></div></li><li><p><strong><code>watch</code></strong>: <em>boolean</em> (optional)</p><div class=paragraph><p>Whether the configured <code>src</code> should be watched for updates. Defaults to <code>false</code>. If the <code>src</code> has been configured to a single file, the provider will watch for changes in that file. Otherwise, if the <code>src</code> has been configured to a directory, the provider will watch for files appearing and disappearing in this directory, as well as for changes in each particular file in this directory. Recursive lookup is not supported. That is, if the configured directory contains further directories, these, as well as their contents are ignored.</p></div></li><li><p><strong><code>env_vars_enabled</code></strong>: <em>boolean</em> (optional)</p><div class=paragraph><p>Whether to enable environment variables access in the rule set files. Defaults to <code>false</code>. If set to <code>true</code>, environment variables usage using Bash syntax is possible as with the <a href=../../../../docs/getting_started/configuration_introduction/#_configuration_file>static configuration</a>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>All environment variables, used in the rule set files must be known in advance to the heimdall process (when it starts). In addition, the usage of that functionality might lead to security issues. If an adversary is somehow able to add new or update existing rule sets, it would be theoretically able exfiltrating environment variables available to the heimdall process by crafting contextualizers or authorizers, which would forward the corresponding values to a controlled service. So, use with caution, disable the watching of rule set updates and try to avoid!</td></tr></tbody></table></div><div class=exampleblock><div class=title>Example 1. Rule set which makes use of environment variables</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>version</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>1alpha2&#34;</span>
<span style=color:#a6e22e>name</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>my-rule-set</span>
<span style=color:#a6e22e>rules</span><span style=color:#fff;background-color:#272822>:</span>
<span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>rule:1</span>
  <span style=color:#a6e22e>match</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>https://my-service1.local/&lt;**&gt;</span>
  <span style=color:#a6e22e>forward_to</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#a6e22e>host</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>${UPSTREAM_HOST:=&#34;default-backend:8080&#34;}</span>
  <span style=color:#a6e22e>methods</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>GET&#34;</span> <span style=color:#fff;background-color:#272822>]</span>
  <span style=color:#a6e22e>execute</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>authorizer</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foobar</span></code></pre></div></div></div></div></li></ul></div><div class=exampleblock><div class=title>Example 2. Load rule sets from the files residing in the <code>/path/to/rules/dir</code> directory and watch for changes.</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>file_system</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>src</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/path/to/rules/dir</span>
  <span style=color:#a6e22e>watch</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#66d9ef>true</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 3. Load rule sets from the <code>/path/to/rules.yaml</code> file without watching it for changes.</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>file_system</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>src</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/path/to/rules.yaml</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=_http_endpoint>HTTP Endpoint</h2><div class=sectionbody><div class=paragraph><p>This provider allows loading of rule sets in a format defined in <a href=../../../../docs/configuration/rules/configuration/#_rule_set>Rule Sets</a> from any remote endpoint accessible via HTTP(s) and supports rule sets in YAML, as well as in JSON format. The differentiation happens based on the <code>Content-Type</code> set in the response from the endpoint, which must be either <code>application/yaml</code> or <code>application/json</code>, otherwise an error is logged and the response from the endpoint is ignored.</p></div><div class=paragraph><p>The loading and removal of rules happens as follows:</p></div><div class=ulist><ul><li><p>if the response status code is an HTTP 200 OK and contains a <a href=../../../../docs/configuration/rules/configuration/#_rule_set>Rule Sets</a> in a known format (see above), the corresponding rules are loaded (if the definitions are valid)</p></li><li><p>in case of network issues, like dns errors, timeouts and alike, the rule sets previously received from the corresponding endpoints are preserved.</p></li><li><p>in any other case related to network communication (e.g. not 200 status code, empty response body, unsupported format, network issues, etc.), the corresponding rules are removed if these were previously loaded.</p></li></ul></div><div class=paragraph><p>The configuration of this provider goes into the <code>http_endpoint</code> property. In contrast to the <a href=#_filesystem>Filesystem</a> provider it can be configured with as many endpoints to load rule sets from as required for the particular use case.</p></div><div class=paragraph><p>Following configuration options are supported:</p></div><div class=ulist><ul><li><p><strong><code>watch_interval</code></strong>: <em><a href=../../../../docs/configuration/reference/types/#_duration>Duration</a></em> (optional)</p><div class=paragraph><p>Whether the configured <code>endpoints</code> should be polled for updates. Defaults to <code>0s</code> (polling disabled).</p></div></li><li><p><strong><code>endpoints</code></strong>: <em>RuleSetEndpoint array</em> (mandatory)</p><div class=paragraph><p>Each entry of that array supports all the properties defined by <a href=../../../../docs/configuration/reference/types/#_endpoint>Endpoint</a>, except <code>method</code>, which is always <code>GET</code>. enable_http_cacheAs with the <a href=../../../../docs/configuration/reference/types/#_endpoint>Endpoint</a> type, at least the <code>url</code> must be configured. Following properties are defined in addition:</p></div><div class=ulist><ul><li><p><strong><code>rule_path_match_prefix</code></strong>: <em>string</em> (optional)</p><div class=paragraph><p>This property can be used to create kind of a namespace for the rule sets retrieved from the different endpoints. If set, the provider checks whether the urls specified in all rules retrieved from the referenced endpoint have the defined path prefix. If not, a warning is emitted and the rule set is ignored. This can be used to ensure a rule retrieved from one endpoint does not collide with a rule from another endpoint.</p></div></li></ul></div></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>HTTP caching according to <a href=https://www.rfc-editor.org/rfc/rfc7234>RFC 7234</a> is enabled by default. It can be disabled by setting <code>enable_http_cache</code> to <code>false</code>.</td></tr></tbody></table></div><div class=exampleblock><div class=title>Example 4. Minimal possible configuration</div><div class=content><div class=paragraph><p>Here the provider is configured to load a rule set from one endpoint without polling it for changes.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>http_endpoint</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>endpoints</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://foo.bar/ruleset1</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 5. Load rule sets from remote endpoints and watch for changes.</div><div class=content><div class=paragraph><p>Here, the provider is configured to poll the two defined rule set endpoints for changes every 5 minutes.</p></div><div class=paragraph><p>The configuration for the first endpoint instructs heimdall to ensure all urls defined in the rules coming from that endpoint must match the defined path prefix.</p></div><div class=paragraph><p>The configuration for the second endpoint defines the <code>rule_path_match_prefix</code> as well. It also defines a couple of other properties. One to ensure the communication to that endpoint is more resilient by setting the <code>retry</code> options and since this endpoint is protected by an API key, it defines the corresponding options as well.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>http_endpoint</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>watch_interval</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>5m</span>
  <span style=color:#a6e22e>endpoints</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://foo.bar/ruleset1</span>
      <span style=color:#a6e22e>rule_path_match_prefix</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/foo/bar</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://foo.bar/ruleset2</span>
      <span style=color:#a6e22e>rule_path_match_prefix</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/bar/foo</span>
      <span style=color:#a6e22e>retry</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>give_up_after</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>5s</span>
        <span style=color:#a6e22e>max_delay</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>250ms</span>
      <span style=color:#a6e22e>auth</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>type</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>api_key</span>
        <span style=color:#a6e22e>config</span><span style=color:#fff;background-color:#272822>:</span>
          <span style=color:#a6e22e>name</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>X-Api-Key</span>
          <span style=color:#a6e22e>value</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>super-secret</span>
          <span style=color:#a6e22e>in</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>header</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=_cloud_blob>Cloud Blob</h2><div class=sectionbody><div class=paragraph><p>This provider allows loading of rule sets in a format defined in <a href=../../../../docs/configuration/rules/configuration/#_rule_set>Rule Sets</a> from cloud blobs, like AWS S3 buckets, Google Cloud Storage, Azure Blobs, or other API compatible implementations and supports rule sets in YAML, as well as in JSON format. The differentiation happens based on the <code>Content-Type</code> set in the metadata of the loaded blob, which must be either <code>application/yaml</code> or <code>application/json</code>, otherwise an error is logged and the blob is ignored.</p></div><div class=paragraph><p>The loading and removal of rules happens as follows:</p></div><div class=ulist><ul><li><p>if the response status code is an HTTP 200 OK and contains a rule set in a known format (see above), the corresponding rules are loaded (if the definitions are valid)</p></li><li><p>in case of network issues, like dns errors, timeouts and alike, the rule sets previously received from the corresponding buckets are preserved.</p></li><li><p>in any other case related to network communication (like, not 200 status code, empty response body, unsupported format, etc.), the corresponding rules are removed if these were previously loaded.</p></li></ul></div><div class=paragraph><p>The configuration of this provider goes into the <code>cloud_blob</code> property. As with <a href=#_http_endpoint>HTTP Endpoint</a> provider, it can be configured with as many buckets/blobs to load rule sets from as required for the particular use case.</p></div><div class=paragraph><p>Following configuration options are supported:</p></div><div class=ulist><ul><li><p><strong><code>watch_interval</code></strong>: <em><a href=../../../../docs/configuration/reference/types/#_duration>Duration</a></em> (optional)</p><div class=paragraph><p>Whether the configured <code>buckets</code> should be polled for updates. Defaults to <code>0s</code> (polling disabled).</p></div></li><li><p><strong><code>buckets</code></strong>: <em>BlobReference array</em> (mandatory)</p><div class=paragraph><p>Each <em>BlobReference</em> entry in that array supports the following properties:</p></div><div class=ulist><ul><li><p><strong><code>url</code></strong>: <em>string</em> (mandatory)</p><div class=paragraph><p>The actual url to the bucket or to a specific blob in the bucket.</p></div></li><li><p><strong><code>prefix</code></strong>: <em>string</em> (optional)</p><div class=paragraph><p>Indicates that only blobs with a key starting with this prefix should be retrieved</p></div></li><li><p><strong><code>rule_path_match_prefix</code></strong>: <em>string</em> (optional)</p><div class=paragraph><p>Creates kind of a namespace for the rule sets retrieved from the blobs. If set, the provider checks whether the urls patterns specified in all rules retrieved from the referenced bucket have the defined path prefix. If that rule is violated, a warning is emitted and the rule set is ignored. This can be used to ensure a rule retrieved from one endpoint does not override a rule from another endpoint.</p></div></li></ul></div></li></ul></div><div class=paragraph><p>The differentiation which storage is used is based on the URL scheme. These are:</p></div><div class=ulist><ul><li><p><code>s3</code> for <a href=https://aws.amazon.com/s3/>AWS S3</a> buckets</p></li><li><p><code>gs</code> for <a href=https://cloud.google.com/storage/>Google Cloud Storage</a> and</p></li><li><p><code>azblob</code> for <a href=https://azure.microsoft.com/en-us/services/storage/blobs/>Azure Blob Storage</a></p></li></ul></div><div class=paragraph><p>Other API compatible storage services, like <a href=https://www.minio.io/>Minio</a>, <a href=https://ceph.com/>Ceph</a>, <a href=https://github.com/chrislusf/seaweedfs>SeaweedFS</a>, etc. can be used as well. The corresponding and other options can be found in the <a href=https://gocloud.dev/howto/blob/>Go CDK Blob</a> documentation, the implementation of this provider is based on.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>The communication to the storage services requires an active session to the corresponding cloud provider. The session information is taken from the vendor specific environment variables, respectively configuration. See <a href=https://docs.aws.amazon.com/sdk-for-go/api/aws/session/>AWS Session</a>, <a href=https://cloud.google.com/docs/authentication/application-default-credentials>GC Application Default Credentials</a> and <a href="https://learn.microsoft.com/en-us/azure/storage/common/authorize-data-access?toc=%2Fazure%2Fstorage%2Fblobs%2Ftoc.json">Azure Storage Access</a> for more information.</td></tr></tbody></table></div><div class=exampleblock><div class=title>Example 6. Minimal possible configuration</div><div class=content><div class=paragraph><p>Here the provider is configured to load rule sets from all blobs stored on the Google Cloud Storage bucket named "my-bucket" without polling for changes.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>cloud_blob</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>buckets</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>gs://my-bucket</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 7. Load rule sets from AWS S3 buckets and watch for changes.</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>cloud_blob</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>watch_interval</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>2m</span>
  <span style=color:#a6e22e>buckets</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>gs://my-bucket</span>
      <span style=color:#a6e22e>prefix</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>service1</span>
      <span style=color:#a6e22e>rule_path_match_prefix</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/service1</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>gs://my-bucket</span>
      <span style=color:#a6e22e>prefix</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>service2</span>
      <span style=color:#a6e22e>rule_path_match_prefix</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/service2</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>s3://my-bucket/my-rule-set?region=us-west-1</span></code></pre></div></div><div class=paragraph><p>Here, the provider is configured to poll multiple buckets with rule sets for changes every 2 minutes.</p></div><div class=paragraph><p>The first two bucket reference configurations reference actually the same bucket on Google Cloud Storage, but different blobs based on the configured blob prefix. The first one will let heimdall loading only those blobs, which start with <code>service1</code>, the second only those, which start with <code>service2</code>.
As <code>rule_path_match_prefix</code> are defined for both as well, heimdall will ensure, that rule sets loaded from the corresponding blobs will not overlap in their url matching definitions.</p></div><div class=paragraph><p>The last one instructs heimdall to load rule set from a specific blob, namely a blob named <code>my-rule-set</code>, which resides on the <code>my-bucket</code> AWS S3 bucket, which is located in the <code>us-west-1</code> AWS region.</p></div></div></div></div></div><div class=sect1><h2 id=_kubernetes>Kubernetes</h2><div class=sectionbody><div class=paragraph><p>This provider is only supported if heimdall is running within Kubernetes and allows usage (validation and loading) of <a href=#_ruleset_resource>Rule Set</a> resources deployed to the same Kubernetes environment. The configuration of this provider goes into the <code>kubernetes</code> property and supports the following configuration options:</p></div><div class=ulist><ul><li><p><strong><code>auth_class</code></strong>: <em>string</em> (optional)</p><div class=paragraph><p>By making use of this property, you can specify which RuleSets should be used by this particular heimdall instance. If specified, heimdall will consider the value of the <code>authClassName</code> attribute of each RuleSet deployed to the cluster and validate, respectively load only those rules, which <code>authClassName</code> values match the value of <code>auth_class</code>. If not set all RuleSets will be used.</p></div></li><li><p><strong><code>tls</code></strong>: <em><a href=../../../../docs/configuration/reference/types/#_tls>TLS</a></em> (optional)</p><div class=paragraph><p>If configured, heimdall will start and expose a validating admission controller service on port <code>4458</code> listening on all interfaces. This service allows integration with the Kubernetes API server enabling validation of the applied RuleSet resources before these are made available to heimdall for loading. This way you will get a direct feedback about RuleSet issues without the need to look into heimdall logs if a RuleSet could not be loaded (See also <a href=../../../../openapi/#tag/Validating-Admission-Controller>API</a> documentation for more details).</p></div><div class=paragraph><p>To let the Kubernetes API server use the admission controller, there is a need for a properly configured <a href=https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#deploy-the-admission-webhook-service><code>ValidatingWebhookConfiguration</code></a>. The <a href=https://github.com/dadrus/heimdall/tree/main/charts/heimdall>Helm Chart</a> shipped with heimdall does this automatically as soon as this property is configured. It does however need a <code>caBundle</code> to be set or injected. Otherwise, the Kubernetes API server won’t trust the configured TLS certificate and won’t use the endpoint.</p></div></li></ul></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Since multiple heimdall deployments with different configured <code>auth_class</code> names can coexist, RuleSets with mismatching <code>authClassName</code> will be ignored by a particular deployment. In addition, Kubernetes API server validation requests for mismatching RuleSets result in a successful response. This behavior is required as otherwise, as soon as the API server receives even a single failed validation response, the affected RuleSet resource will be discarded and not made available for loading to any of the available heimdall deployments.</p></div><div class=paragraph><p>That also means, if there is no heimdall deployment feeling responsible for the given RuleSet (due to <code>authClassName</code> - <code>auth_class</code> mismatch), the affected RuleSet will be silently ignored.</p></div></td></tr></tbody></table></div><div class=exampleblock><div class=title>Example 8. Minimal possible configuration</div><div class=content><div class=paragraph><p>Here, the provider is just enabled. Since no <code>auth_class</code> is configured, it will load all RuleSets deployed to the Kubernetes environment.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>kubernetes</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#fff;background-color:#272822>{}</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 9. Configuration with <code>auth_class</code> set</div><div class=content><div class=paragraph><p>Here, the provider is configured to consider only those RuleSets, which <code>authClassName</code> is set to <code>foo</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>kubernetes</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>auth_class</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foo</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 10. Configuration with <code>auth_class</code> set and enabled validating admission controller</div><div class=content><div class=paragraph><p>As with the previous example, the provider is configured to consider only those RuleSets, which <code>authClassName</code> is set to <code>foo</code>. The admission controller is enabled as well and will validate <code>RuleSet</code> resources before these are made available for loading.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>kubernetes</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>auth_class</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foo</span>
  <span style=color:#a6e22e>tls</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#75715e># below is the minimal required configuration</span>
    <span style=color:#a6e22e>key_store</span><span style=color:#fff;background-color:#272822>:</span>
      <span style=color:#a6e22e>path</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>/path/to/file.pem</span></code></pre></div></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>This provider requires a RuleSet CRD being deployed, otherwise heimdall will not be able to monitor corresponding resources and emit error messages to the log.</p></div><div class=paragraph><p>If you have used the <a href=../../../../docs/operations/install/#_helm_chart>Helm Chart</a> to install heimdall, this CRD is already installed. You can however install it also like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash><span style=color:#fff;background-color:#272822>$ </span>kubectl apply <span style=color:#f92672>-f</span> https://raw.githubusercontent.com/dadrus/heimdall/main/charts/heimdall/crds/ruleset.yaml</code></pre></div></div></td></tr></tbody></table></div><div class=sect2><h3 id=_ruleset_resource>RuleSet resource</h3><div class=paragraph><p>As written above, the <code>kubernetes</code> provider supports only rules, deployed as customer <code>RuleSet</code> resources.</p></div><div class=paragraph><p>Each <code>RuleSet</code> has the following attributes:</p></div><div class=ulist><ul><li><p><strong><code>name</code></strong>: <em>string</em> (required)</p><div class=paragraph><p>The name of a rule set.</p></div></li><li><p><strong><code>authClassName</code></strong>: <em>string</em> (optional)</p><div class=paragraph><p>References the heimdall instance, which should use this <code>RuleSet</code>.</p></div></li><li><p><strong><code>rules</code></strong>: <em><a href=../../../../docs/configuration/rules/configuration/#_rule_configuration>Rule Configuration</a> array</em> (mandatory)</p><div class=paragraph><p>List of the actual rules.</p></div></li></ul></div><div class=exampleblock><div class=title>Example 11. Simple Example</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=yaml><span style=color:#a6e22e>apiVersion</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>heimdall.dadrus.github.com/v1alpha2</span>
<span style=color:#a6e22e>kind</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>RuleSet</span>
<span style=color:#a6e22e>metadata</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>name</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&lt;some</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>name&gt;&#34;</span>
<span style=color:#a6e22e>spec</span><span style=color:#fff;background-color:#272822>:</span>
  <span style=color:#a6e22e>authClassName</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&lt;optional</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>auth_class</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>reference</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>(see</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>above)&gt;</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;</span>
  <span style=color:#a6e22e>rules</span><span style=color:#fff;background-color:#272822>:</span>
    <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>id</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&lt;identifier</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>of</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>a</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>rule</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>1&gt;&#34;</span>
      <span style=color:#a6e22e>match</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#a6e22e>url</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>http://127.0.0.1:9090/foo/&lt;**&gt;</span>
      <span style=color:#a6e22e>execute</span><span style=color:#fff;background-color:#272822>:</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>authenticator</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>foo</span>
        <span style=color:#fff;background-color:#272822>-</span> <span style=color:#a6e22e>authorizer</span><span style=color:#fff;background-color:#272822>:</span> <span style=color:#e6db74>bar</span></code></pre></div></div></div></div><div class=paragraph><p>In addition to configuration attributes described above, a <code>RuleSet</code> resource has a <code>status</code> stanza, which provides information about the usage status as soon as a <code>RuleSet</code> has been loaded by at least one heimdall instance.</p></div><div class=paragraph><p>By making use of <code>kubectl get -n &lt;your namespace> rulesets.heimdall.dadrus.github.com</code> you’ll get an overview of deployed <code>RuleSet</code> resources in a particular namespace, like e.g. shown below</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash>NAME             ACTIVE IN       AGE
test-rules       2/2             32m</code></pre></div></div><div class=paragraph><p>The value <code>2/2</code> in <code>ACTIVE IN</code> means, &lt;active in heimdall instances>/&lt;matching instances>. With</p></div><div class=ulist><ul><li><p>"matching instances" being those heimdall instances, which <code>auth_class</code> matches the <code>authClassName</code> in the <code>RuleSet</code> and</p></li><li><p>"active in heimdall instances" are those from the "matching instances", which were able to load the <code>RuleSet</code>.</p></li></ul></div><div class=paragraph><p>In addition, you can also get further information about the executed reconciliations by the deployed heimdall instances by taking a look at the <code>.status.conditions</code> field. The reconciliation status of matching instances is present there. That also means, if there were errors while loading the <code>RuleSet</code>, these are present in this condition list</p></div><div class=paragraph><p>E.g.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=bash><span style=color:#fff;background-color:#272822>$ </span>kubectl describe <span style=color:#f92672>-n</span> <span style=color:#f6aa11>test </span>rulesets.heimdall.dadrus.github.com test-rules

Name:         test-rules
Namespace:    <span style=color:#f6aa11>test</span>
...
Status:
  Conditions:
    Last Transition Time:  2023-11-08T21:55:36Z
    Message:               heimdall-6fb66c47bc-kwqqn instance successfully loaded RuleSet
    Observed Generation:   1
    Reason:                RuleSetActive
    Status:                True
    Type:                  heimdall-6fb66c47bc-kwqqn/Reconciliation
    Last Transition Time:  2023-11-08T21:55:36Z
    Message:               heimdall-6fb66c47bc-l7skn instance successfully loaded RuleSet
    Observed Generation:   1
    Reason:                RuleSetActive
    Status:                True
    Type:                  heimdall-6fb66c47bc-l7skn/Reconciliation
  Active In:               2/2
  Events:                  &lt;none&gt;</code></pre></div></div></div></div></div></linkable-headline-area></div><p class="text-end fst-italic fs-7">Last updated on <span class=fw-bold>Nov 14, 2023</span></p><div class="d-flex justify-content-between"><a href=../../../../docs/configuration/rules/default/><div class="fs-6 mb-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5.0 010 .708L5.707 8l5.647 5.646a.5.5.0 01-.708.708l-6-6a.5.5.0 010-.708l6-6a.5.5.0 01.708.0z"/></svg>Default Rule</div></a><a class=ms-auto href=../../../../docs/configuration/cryptographic_material/><div class="fs-6 mb-3">Cryptographic Material<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></div></a></div></main></div><footer class="footer py-4 py-md-5 px-4 px-md-3"><div class=container><div class=row><div class="col-lg-3 mb-3"><p class=fs-5>Heimdall</p><ul class="list-unstyled small text-muted"><li class=mb-2>2022-2023 © Heimdall Project Authors. All rights reserved.</li><li class=mb-2><a href=https://github.com/dadrus/heimdall/blob/master/LICENSE>Apache 2.0 licensed</a></li></ul></div><div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>Links</h5><ul class=list-unstyled><li class=mb-2><a href=../../../../>Home</a></li><li class=mb-2><a href=../../../../docs/welcome>Docs</a></li><li class=mb-2><a href=../../../../openapi/>API</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Guides</h5><ul class=list-unstyled><li class=mb-2><a href=../../../../docs/operations/install/>Install</a></li><li class=mb-2><a href=../../../../docs/getting_started/>Getting Started</a></li><li class=mb-2><a href=../../../../docs/guides/>Integration Guides</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Community</h5><ul class=list-unstyled><li class=mb-2><a href=https://github.com/dadrus/heimdall>Github</a></li><li class=mb-2><a href=https://discord.gg/qQgg8xKuyb>Discord</a></li></ul></div></div></div></footer><script src=../../../../js/main.js defer></script>
<script src=https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js></script></body></html>