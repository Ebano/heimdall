{{ $currentPage := . -}}
{{ $section := $currentPage.Section -}}

<button type="button" class="btn btn-outline-secondary mb-3 d-none d-md-block search-icon" data-bs-toggle="modal" data-bs-target="#docSearch"
  aria-controls="docSearch" aria-expanded="false" aria-label="Open search">
  Search docs
</button>
<ul class="nav flex-column">
  {{ range (index .Site.Menus $section) -}}
  <li class="nav-item">
    {{ $active := in $currentPage.RelPermalink .URL }}
    {{ if .HasChildren -}}
    <strong class="d-md-block fs-6">{{ .Title }}</strong>
    <ul class="nav flex-column mb-2">
      {{ range .Children -}}
      <li class="nav-item">
        {{ $active := in $currentPage.RelPermalink .URL }}
        <a class="nav-link {{ if $active }} link-primary {{ else }} link-secondary {{ end }}" href="{{ .URL }}">{{ .Title }}</a>
      </li>
      {{ end }}
    </ul>
    {{- else -}}
    <a class="nav-link {{ if $active }} link-primary {{ else }} link-secondary {{ end }}"  href="{{ .URL }}">{{- .Title -}}</a>
    {{- end -}}
  </li>
  {{ end }}
</ul>
